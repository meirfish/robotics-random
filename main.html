<!DOCTYPE html>
<html>
    <head>
        <style>
            .field{
                margin:auto;
                width:600px;
                height:600px;
                background-color:white;
                border-style:solid;
                border-radius: 100%;
                border-width:50px;
                border-color:black;
                position:relative;
            }

            .robot{
                margin:auto;
                margin-top: 38%;
                width:150px;
                height:150px;
                background-color:rgb(141, 141, 141);
                display:grid;
                place-items:center;
            }

            .circle {
            border-radius: 50%;
            border: 5px solid black;
            position: absolute;
            width: 100px;
            height: 100px;
        }

        .circle-white { background: white; }
        .circle-black { background: black; }

            #action{
                position:relative;
                margin-left:64%;
            }
        </style>
    </head>

    <body>
        <h1>Кегельринг рандом</h1>
        <div>
            <div class="field" id="field">
                <div class="robot" id="robot"><p>Робот ==></p></div>
                <p id="orient"></p>
            </div>
            <button class="button" id="action" onclick="randomise()">Араластыру</button>
            <label>Кеглі саны:</label>
            <input type="number" id="amount" value="4" min="1" max="8" onchange="limit()">
            <label>Қаралар саны:</label>
            <input type="number" id="blacks" value="1" min="0" max="4">
        </div>

        <script>
            function limit(){
                let total = document.getElementById("amount");
                let black = document.getElementById("blacks");
                
                if (black.value > total.value){
                    black.value = total.value;
                }

                black.max=total.value;
            }

            function randomise(){
                const black = document.getElementById("blacks").value;
                const amount = document.getElementById("amount").value;
                const parent = document.getElementById("field");
                const before = document.getElementById("robot");

                [...parent.getElementsByClassName('circle')].forEach(e => e.remove());

                let pos = Array.from({ length: 8 }, (_, i) => i);
                let chosen = [];

                for (let i = 0; i < amount; i++) {
                    let a;
                    do { a = Math.floor(Math.random() * pos.length); }
                    while (chosen.includes(pos[a]));
                    chosen.push(pos[a]);
                }

                chosen.forEach((i, idx) => {
                    const isBlack = idx < black;
                    const circle = document.createElement("p");
                    circle.classList.add("circle", isBlack ? "circle-black" : "circle-white");
                    circle.style.left = `${250 + 200 * Math.sin(Math.PI / 4 * i)}px`;
                    circle.style.top = `${250 + 200 * Math.cos(Math.PI / 4 * i)}px`;
                    parent.insertBefore(circle, before);
                });
            }
        </script>

    </body>

    <foot>

    </foot>
</html>
